!content-type:shopProduct
name: shopProducts
icon: icon-assets-app

subApps:
  detail:
    form:
      properties:
        - name: productDescription1
          $type: textField
          rows: 3
        - name: productDescription2
          $type: textField
          rows: 4
        - name: supplierUUID
          $type: linkField
          datasource:
            $type: jcrDatasource
            workspace: shopSuppliers
            allowedNodeTypes:
              - mgnl:folder
              - shopSupplier
          chooserId: shop:choosers/shopSupplierChooser
        - name: taxCategoryUUID
          $type: linkField
          datasource:
            $type: jcrDatasource
            workspace: shops
            allowedNodeTypes:
              - shop
              - shopTaxCategories
              - shopTaxCategory
          chooserId: shop:choosers/shopTaxCategoryChooser
        - name: productCategoryUUIDs
          field:
            $type: linkField
            datasource:
              $type: jcrDatasource
              workspace: category
              allowedNodeTypes:
                - mgnl:category
                - mgnl:folder
            chooserId: shop:choosers/shopProductCategoryChooser
        - name: prices
          $type: jcrMultiField
          field:
            $type: compositeField
            properties:
              priceCategoryUUID:
                $type: linkField
                datasource:
                  $type: jcrDatasource
                  workspace: shops
                  allowedNodeTypes:
                    - shop
                    - shopPriceCategories
                    - shopPriceCategory
                chooserId: shop:choosers/shopPriceCategoryChooser
              price:
                $type: textField
                type: java.lang.Double
                converterClass: com.vaadin.data.converter.StringToDoubleConverter
      layout:
        $type: tabbedLayout
        tabs:
          product:
            fields:
              - name: name
              - name: title
              - name: productDescription1
              - name: productDescription2
              - name: image
              - name: supplierUUID
              - name: maxQuantityPerOrder
          pricing:
            fields:
              - name: prices
              #                class: info.magnolia.shop.app.field.definition.PriceCategoryFieldDefinition
              - name: taxCategoryUUID
          #                class: info.magnolia.shop.app.field.definition.TaxCategoriesSelectFieldDefinition
          weightSize:
            fields:
              - name: weight
              - name: weightUnit
              - name: height
              - name: width
              - name: depth
              - name: sizeUnit
          tags:
            fields:
              - name: productCategoryUUIDs
